<Ui xmlns="http://www.blizzard.com/wow/ui/"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://www.blizzard.com/wow/ui/
    http://wowprogramming.com/FrameXML/UI.xsd">

    <Button name="CliqueRowTemplate" enableMouse="true" virtual="true">
        <Size x="298" y="17"/>
        <Layers>
            <Layer level="BORDER">
                <Texture name="$parentIcon" parentKey="icon"
                    file="Interface\Icons\Ability_Druid_Nourish">
                    <Size x="14" y="14"/>
                    <Anchors>
                        <Anchor point="TOPLEFT">
                            <Offset>
                                <AbsDimension x="5" y="0"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </Texture>
                <FontString name="$parentName" parentKey="name"
                    inherits="GameFontHighlightSmall" justifyH="LEFT" text="Healing Touch">
                    <Size>
                        <AbsDimension x="175" y="14"/>
                    </Size>
                    <Anchors>
                        <Anchor point="LEFT" relativeTo="$parentIcon" relativePoint="RIGHT">
                            <Offset>
                                <AbsDimension x="3" y="0"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>
                <!--
                <FontString name="$parentType" parentKey="type"
                    inherits="GameFontHighlightSmall" justifyH="CENTER" text="Spell">
                    <Size>
                        <AbsDimension x="40" y="14"/>
                    </Size>
                    <Anchors>
                        <Anchor point="LEFT" relativeTo="$parentName" relativePoint="RIGHT">
                            <Offset>
                                <AbsDimension x="0" y="0"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>
                -->
                <FontString name="$parentBind" parentKey="bind"
                    inherits="GameFontHighlightSmall" justifyH="RIGHT" text="Alt-LeftClick">
                    <Size>
                        <AbsDimension x="115" y="14"/>
                    </Size>
                    <Anchors>
                        <Anchor point="LEFT" relativeTo="$parentName" relativePoint="RIGHT">
                            <Offset>
                                <AbsDimension x="0" y="0"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>
            </Layer>
        </Layers>
        <Scripts>
            <OnMouseWheel>
                local slider = CliqueConfig.page1.slider
                slider:SetValue(slider:GetValue() - delta)
            </OnMouseWheel>
        </Scripts>
        <HighlightTexture setAllPoints="true" file="Interface\QuestFrame\UI-QuestTitleHighlight" alphaMode="ADD">
            <Size x="315" y="14"/>
            <Anchors>
                <Anchor point="TOPLEFT">
                    <Offset x="-1" y="0"/>
                </Anchor>
            </Anchors>
        </HighlightTexture>
    </Button>

    <Button name="CliqueColumnTemplate" inherits="WhoFrameColumnHeaderTemplate" virtual="true">
        <Scripts>
            <OnClick>
                PlaySound("igMainMenuOptionCheckBoxOn");
            </OnClick>
        </Scripts>
    </Button>

    <Button name="CliqueSpellbookButtonTemplate" setAllPoints="true" hidden="true" virtual="true">
        <Scripts>
            <OnEnter>
                local parent = self:GetParent()
                if parent:IsEnabled() == 1 then
                    SpellButton_OnEnter(parent)
                else
                    self:GetHighlightTexture():Hide()
                end

                CliqueConfig:Spellbook_EnableKeyboard(self, motion)
            </OnEnter>
            <OnLeave>
                GameTooltip:Hide()
                CliqueConfig:Spellbook_DisableKeyboard(self, motion)
            </OnLeave>
            <OnClick>
                CliqueConfig:Spellbook_OnBinding(self, button)
            </OnClick>
            <OnKeyDown>
                CliqueConfig:Spellbook_OnBinding(self, key)
            </OnKeyDown>
            <OnMouseWheel>
                local button = (delta > 0) and "MOUSEWHEELUP" or "MOUSEWHEELDOWN"
                CliqueConfig:Spellbook_OnBinding(self, button)
            </OnMouseWheel>
        </Scripts>
        <NormalTexture file="Interface\BUTTONS/GLOWSTAR">
            <Size x="16" y="16"/>
            <Anchors>
                <Anchor point="BOTTOMRIGHT">
                    <Offset x="-3" y="3"/>
                </Anchor>
            </Anchors>
        </NormalTexture>
        <HighlightTexture file="Interface\BUTTONS\ButtonHilight-Square" alphaMode="ADD"/>
    </Button>

    <!-- Main configuration frame -->
    <Frame name="CliqueConfig" inherits="ButtonFrameTemplate" parent="UIParent" hidden="true">
        <Size>
            <AbsDimension x="333" y="475"/>
        </Size>
        <Anchors>
            <Anchor point="CENTER" x="0" y="0"/>
        </Anchors>
        <Frames>
            <!-- Page definitions - Configuration List -->
            <Frame name="$parentPage1" parentKey="page1" hidden="true">
                <Frames>
                    <Button name="$parentColumn1" parentKey="column1" inherits="CliqueColumnTemplate">
                        <Anchors>
                            <Anchor point="TOPLEFT">
                                <Offset x="0" y="0"/>
                            </Anchor>
                        </Anchors>
                        <Scripts>
                            <OnLoad>
                                WhoFrameColumn_SetWidth(self, 203);
                            </OnLoad>
                        </Scripts>
                    </Button>
                    <Button name="$parentColumn2" parentKey="column2" inherits="CliqueColumnTemplate">
                        <Anchors>
                            <Anchor point="TOPLEFT" relativePoint="TOPRIGHT" relativeTo="$parentColumn1">
                                <Offset x="-2" y="0"/>
                            </Anchor>
                        </Anchors>
                        <Scripts>
                            <OnLoad>
                                WhoFrameColumn_SetWidth(self, 120);
                            </OnLoad>
                        </Scripts>
                        <ButtonText>
                            <Anchors>
                                <Anchor point="RIGHT">
                                    <Offset>
                                        <AbsDimension x="-8" y="0"/>
                                    </Offset>
                                </Anchor>
                            </Anchors>
                        </ButtonText>
                    </Button>
                    <Slider name="$parent_VSlider" parentKey="slider" valueStep="1.0" hidden="true" orientation="VERTICAL">
                        <Size x="18" y="200"/>
                        <Anchors>
                            <Anchor point="TOPRIGHT">
                                <Offset x="-44" y="-90"/>
                            </Anchor>
                            <Anchor point="BOTTOMRIGHT">
                                <Offset x="0" y="83"/>
                            </Anchor>
                        </Anchors>
                        <Backdrop edgeFile="Interface\Buttons\UI-SliderBar-Border"
                            bgFile="Interface\Buttons\UI-SliderBar-Background"
                            tile="true">
                            <EdgeSize>
                                <AbsValue val="8"/>
                            </EdgeSize>
                            <TileSize>
                                <AbsValue val="8"/>
                            </TileSize>
                            <BackgroundInsets>
                                <AbsInset left="3" right="3" top="6" bottom="6"/>
                            </BackgroundInsets>
                        </Backdrop>
                        <Scripts>
                            <OnValueChanged>
                                CliqueConfig:UpdateList()
                            </OnValueChanged>
                        </Scripts>
                        <ThumbTexture name="$parentThumbTexture"
                            file="Interface\Buttons\UI-ScrollBar-Knob">
                            <Size x="24" y="24"/>
                        </ThumbTexture>
                    </Slider>
                </Frames>
                <Scripts>
                    <OnShow>
                        CliqueConfig:EnableSpellbookButtons()
                    </OnShow>
                    <OnHide>
                        CliqueConfig:EnableSpellbookButtons()
                    </OnHide>
                </Scripts>
            </Frame> <!-- Page 1 - Configuration List -->

            <!-- Page definitions - Edit Page -->

            <Frame name="$parentPage2" parentKey="page2" hidden="true">
                <Frames>
                    <!-- Wrap the scroll frame in a frame that can capture clicks -->
                    <Button name="CliqueClickGrabber" parentKey="clickGrabber">
                        <Size x="320" y="160" />
                        <Anchors>
                            <Anchor point="BOTTOMLEFT" relativeTo="$parent" relativePoint="BOTTOMLEFT">
                                <Offset>
                                    <AbsDimension x="20" y="85"/>
                                </Offset>
                            </Anchor>
                        </Anchors>
                        <Backdrop bgFile="Interface\Tooltips\UI-Tooltip-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
                            <EdgeSize>
                                <AbsValue val="16"/>
                            </EdgeSize>
                            <TileSize>
                                <AbsValue val="16"/>
                            </TileSize>
                            <BackgroundInsets>
                                <AbsInset left="5" right="5" top="5" bottom="5"/>
                            </BackgroundInsets>
                        </Backdrop>
                        <Scripts>
                            <OnLoad>
                                self:SetBackdropColor(0.3, 0.3, 0.3)
                                self:SetBackdropBorderColor(0.5, 0.5, 0.5)
                            </OnLoad>
                            <OnClick>
                                CliqueScrollFrameEditBox:SetFocus()
                            </OnClick>
                        </Scripts>
                        <Frames>
                            <ScrollFrame name="CliqueScrollFrame" parentKey="scrollFrame" inherits="UIPanelScrollFrameTemplate">
                                <Size>
                                    <AbsDimension x="288" y="150"/>
                                </Size>
                                <Anchors>
                                    <Anchor point="TOPLEFT" relativeTo="$parent" relativePoint="TOPLEFT">
                                        <Offset>
                                            <AbsDimension x="5" y="-5"/>
                                        </Offset>
                                    </Anchor>
                                </Anchors>
                                <ScrollChild>
                                    <EditBox name="$parentEditBox" multiLine="true" autoFocus="false" countInvisibleLetters="true">
                                        <Size>
                                            <AbsDimension x="288" y="85"/>
                                        </Size>
                                        <Scripts>
                                            <OnTextChanged>
                                                ScrollingEdit_OnTextChanged(self, self:GetParent());
                                            </OnTextChanged>
                                            <OnCursorChanged function="ScrollingEdit_OnCursorChanged"/>
                                            <OnUpdate>
                                                ScrollingEdit_OnUpdate(self, elapsed, self:GetParent());
                                            </OnUpdate>
                                            <OnEscapePressed function="EditBox_ClearFocus"/>
                                        </Scripts>
                                        <FontString inherits="GameFontHighlightSmall"/>
                                    </EditBox> 
                                </ScrollChild>
                            </ScrollFrame>
                        </Frames>
                    </Button>
                    <Button name="CliqueConfigSave" parentKey="save" inherits="UIPanelButtonTemplate2" text="SAVE">
                        <Size x="82" y="22"/>
                        <Anchors>
                            <Anchor point="BOTTOMRIGHT">
                                <Offset x="-40" y="64"/>
                            </Anchor>
                        </Anchors>
                        <Scripts>
                            <OnClick>CliqueConfig:Save_OnClick(self, button, down)</OnClick>
                        </Scripts>
                    </Button>
                    <Button name="CliqueConfigCancel" parentKey="cancel" inherits="UIPanelButtonTemplate2" text="CANCEL">
                        <Size x="82" y="22"/>
                        <Anchors>
                            <Anchor point="RIGHT" relativeTo="CliqueConfigSave" relativePoint="LEFT">
                                <Offset x="2" y="0"/>
                            </Anchor>
                        </Anchors>
                        <Scripts>
                            <OnClick>CliqueConfig:Cancel_OnClick(self, button, down)</OnClick>
                        </Scripts>
                    </Button>
                </Frames>
            </Frame> <!-- Page 2 - Edit Page -->
        </Frames>
        <Scripts>
            <OnLoad>
                CliqueConfigPortrait:SetTexture("Interface\\FriendsFrame\\FriendsFrameScrollIcon");
                CliqueConfig.page1:SetParent(CliqueConfig.Inset)
                CliqueConfig.page2:SetParent(CliqueConfig.Inset)
                CliqueConfig.page1:SetAllPoints(CliqueConfig.Inset)
                CliqueConfig.page2:SetAllPoints(CliqueConfig.Inset)
            </OnLoad>
            <OnShow>
                CliqueConfig:OnShow()
            </OnShow>
        </Scripts>
    </Frame> <!-- CliqueConfig -->
</Ui>

